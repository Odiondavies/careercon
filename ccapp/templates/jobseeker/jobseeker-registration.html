<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>CareerConnect: Registration </title>
    <!-- Bootstrap css-->
    <link rel="stylesheet" href="/static//bootstrap//css//bootstrap.min.css">
    <!-- Fontawesome css-->
    <link rel="stylesheet" href="/static/fontawesome/css/all.css" />
    <!-- Animation css -->
    <link rel="stylesheet" href="/static/styles/animate.min.css" />
    <!-- Page Css -->
    <link rel="stylesheet" href="/static/styles/stylesheet.css" />
  </head>
  <body>
    <!-- Registration Form-->
    <div class="container-fluid">
      <div class="row justify-content-center align-items-center">
          <div class="col">
            <div class="card mt-2 border-0" style="background: #ddf7f5">
              <div class="card-header p-3 d-flex justify-content-between align-items-center">
                <div class="d-flex align-items-center">
                  <a href="{{ url_for('home') }}">
                    <img src="/static/images/logo-light.png" alt="logo" height="50" title="Back to homepage" />
                  </a>
                    <small> CareerConnect </small>
                </div>
                <a
                  type="button"
                  class="btn-close align-self-start"
                  href="{{ url_for('home') }}">
                </a>
              </div>
              <div class="card-body">
                <div class="card p-0 m-0 border-0" style="height: 69vh; background: inherit">
                    <form action="{{url_for('jobseeker_registration')}}" method="post" novalidate>
                      {{ form.csrf_token }}
                      <div class="row align-items-center justify-content-center mt-4">
                        <div class="col-lg-6 professionPage">
                            <div class="py-3 ps-4 vstack heading">
                              <h4>What is your major professional interest?</h4>
                                <span>You can always change it in your profile.</span>
                            </div>
                          <div class="details_wrapper">
                            {% set messages = get_flashed_messages(with_categories=True) %}
                            {% for cat, message in messages %}
                            {% if cat == 'error' %}
                              <div class="alert alert-danger"><i class="fas fa-circle-xmark"></i> {{message}}</div>
                            {% endif %}
                            {% endfor %}
                            <div class="mb-3">
                               <select name="category" id="category" class="form-select border-secondary">
                                <option value="">Select Profession </option>
                                {% for category in categories %}
                                    <option value="{{ category.category_id }}">{{ category.category_name }}</option>
                                {% endfor %}
                               </select>
                              <div class="mt-4">
                                <button
                                  type="button"
                                  class="btn btn-custom col-12"
                                  id="nextProfession" disabled>
                                  Next <i class="fa-solid fa-angle-right"></i>
                                </button>
                              </div>
                            </div>
                          </div>
                        </div>
                        <div class="col-lg-6 professionalLevelPage hidden">
                            <div class="py-3 ps-4 heading">
                              <h4>Professional experience.</h4>
                                <span> Choose your years of professional experience. </span>
                            </div>
                              <div class="details_wrapper">
                                <div class="mb-3">
                                    <select name="level" id="level" class="form-select border-secondary">
                                        <option value="">Select Level </option>
                                        {% for level in levels %}
                                            <option value="{{ level.level_id }}">{{ level.level_name }}</option>
                                        {% endfor %}
                                    </select>
                                  <div class="mt-4">
                                    <button
                                      type="button" disabled
                                      class="btn btn-custom col-12"
                                      id="nextProfessional"
                                    >
                                      Next <i class="fa-solid fa-angle-right"></i>
                                    </button>
                                  </div>
                                </div>
                              </div>
                            <div class="mt-4 text-primary">
                                <a type="button"
                                  class="btn"
                                  id="backProfession"
                                > <i class="fa-solid fa-arrow-left"></i> Previous
                                </a>
                              </div>
                          </div>
                        <div class="col-lg-6 skillsPage hidden">
                            <div class="py-3 ps-4 heading">
                              <h4>What is your most valuable skill?</h4>
                              <span>You can add more skills on your profile after registration.</span>
                            </div>
                          <div class="details_wrapper">
                            <div class="mb-3">
                               <select name="skill" id="skill" class="form-select border-secondary">
                                <option>Skill</option>
                               </select>
                              <div class="mt-4">
                                <button
                                  type="button" disabled
                                  class="btn btn-custom col-12"
                                  id="nextSkills"
                                >
                                  Next <i class="fa-solid fa-angle-right"></i>
                                </button>
                              </div>
                            </div>
                          </div>
                            <div class="mt-4 text-primary">
                                <a type="button"
                                  class="btn"
                                  id="backProfessional"
                                > <i class="fa-solid fa-arrow-left"></i> Previous
                                </a>
                              </div>
                        </div>
                        <div class="col-lg-6 personalPage hidden">
                            <div class="py-3 ps-4 heading">
                              <h4> Provide your personal credentials.</h4>
                            </div>
                            <div class="details_wrapper">
                                <div class="row">
                                    <div class="col-lg-6 mb-3">
                                      <div class="form-floating mb-3">
                                      {{ form.firstname(class="form-control border-secondary", placeholder='Firstname') }}
                                      {{ form.firstname.label(for="firstname") }}
                                    </div>
                                    </div>
                                    <div class="col-lg-6">
                                      <div class="form-floating mb-3">
                                  {{ form.lastname(class="form-control border-secondary", placeholder='Lastname') }}
                                  {{ form.lastname.label(class="lastname") }}
                                </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-6 mb-3">
                                      <div class="mb-3">
                                       <select name="state" id="state" class="form-select border-secondary">
                                           <option> State </option>
                                           {% for state in states %}
                                               <option value="{{ state.state_id }}">{{ state.state_name }}</option>
                                           {% endfor %}
                                       </select>
                                      </div>
                                    </div>
                                    <div class="col-6">
                                        <div class="mb-3">
                                       <select name="lga" id="lga" class="form-select border-secondary">
                                         <option>City</option>
                                       </select>
                                      </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-12">
                                        <div class="mb-3">
                                          <select name="gender" id="gender" class="form-select form-select-lg border-secondary">
                                           <option> Select Gender</option>
                                           <option value="MALE">Male</option>
                                           <option value="FEMALE">Female</option>
                                       </select>
                                        </div>
                                    </div>
                                  
                                </div>
                                <div class=" mt-3">
                                  <button
                                    type="button" disabled
                                    class="btn btn-custom col-12"
                                    id="nextPersonal">
                                    Next <i class="fa-solid fa-angle-right"></i>
                                  </button>
                                </div>
                            </div>
                            <div class="mt-3 text-primary">
                                <a type="button"
                                  class="btn"
                                  id="backSkills"
                                > <i class="fa-solid fa-arrow-left"></i> Previous
                                </a>
                              </div>
                          </div>
                        <div class="col-lg-6 loginPage hidden">
                          <div class="mt-3 p-4 pb-2 heading">
                            <p class="fs-5">Provide a valid email address so employers could contact you. </p>
                          </div>
                          <div class="details_wrapper">
                            <div class="form-floating mb-3">
                                <input type="email" name='email' id="email" class="form-control border-secondary" placeholder='Email Address' />
                              <label for="email">Email address</label>
                            </div>
                            <div class="form-floating mb-4">
                                <input type="password" name="password" id="password" class="form-control border-secondary password" placeholder='Password' />
                                <label for="password">Password</label>
                                <i class="fa-solid fa-eye-slash text-dark eyeIcon"></i>
                            </div>
                            <div class="mb-3">
                                <button type="submit" class="btn btn-custom col-12" id="submitBtn">Submit</button>
                            </div>
                          </div>
                            <div class="mt-4 text-primary">
                                <a type="button"
                                  class="btn"
                                  id="backPersonal"
                                > <i class="fa-solid fa-arrow-left"></i> Previous
                                </a>
                            </div>
                        </div>
                      </div>
                    </form>
                </div>           
              </div>
              <div class="card-footer text-body-secondary p-2">
                 <div class="d-flex justify-content-center my-3 fs-5">
                    &copy; 2024 CareerConnect Team
                 </div>
              </div>
            </div>
          </div>
      </div>
    </div>
    <!-- Registration Form Ends-->

    <!-- Jquery js -->
    <script src="/static/scripts/jquery.min.js"></script>
    <!-- Bootstrap js -->
    <script src="/static/bootstrap/js/bootstrap.bundle.min.js"></script>
    <!-- Page js -->
    <script src="/static/scripts/script.js"></script>
    <script>
        $(document).ready(function(){
            $('#category').change(function(){
              $('#nextProfession').removeAttr('disabled');
              let cat = $(this).val();
            
              $.getJSON({
                url: `/show_skill/${cat}`,
                success: function(skill){
                  $('#skill').empty();
                  for (let i = 0; i < skill.length; i++) {
                      $('#skill').append(`<option value='${skill[i].skill_id}'>${skill[i].skill_name}</option>`);
                  }
                }
              });
            });
            $('#state').change(function(){
              let state = $(this).val();
            
              $.getJSON({
                url: `/show_lga/${state}`,
                success: function(lga){
                  $('#lga').empty();
                  for (let i = 0; i < lga.length; i++) {
                      $('#lga').append(`<option value='${lga[i].lga_id}'>${lga[i].lga_name}</option>`);
                  }
                }
              })
            });
            $('#skill').change(function(){
               $('#nextSkills').removeAttr('disabled');
            });
            $('#level').change(function(){
               $('#nextProfessional').removeAttr('disabled');
            });
            $('#gender').change(function(){
                let firstname = $('#firstname').val();
                let lastname = $('#lastname').val();
                let state = $('#state').val();
                let lga = $('#lga').val();
                if (firstname && lastname && state && lga){
                    $('#nextPersonal').removeAttr('disabled');
                }
             });
            $('#submitBtn').click(function(e){
                let email = $('#email').val();
                let password = $('#password').val();
                if (!email || !password){
                    e.preventDefault()
                }
            })
            
          });
    </script>
 </body>
</html>